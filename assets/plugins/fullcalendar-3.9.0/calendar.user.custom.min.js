/*!
 * CIFullCalendar v3
 * Docs & License: http://www.cifullcalendar.com
 * (c) 2018 Sir.Dre
 */
!function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports&&"object"==typeof module)e(require("jquery"),require("moment"),require("google.maps.Geocoder"));else{if(void 0===google.maps.Geocoder)throw"CIFullCalendar requires Gmaps to be loaded first";if("undefined"==typeof jQuery)throw"CIFullCalendar requires jQuery to be loaded first";if("undefined"==typeof moment)throw"CIFullCalendar requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){e.cifullCalendar={version:"3.8.2",internalApiVersion:12};var a=e.fullCalendar;if(a.internalApiVersion===e.cifullCalendar.internalApiVersion){var n=e.cifullCalendar=function(t){e.options=t,e.getRequest(),e.init()};n.DEFAULTS={locale:void 0},n.LOCALES=[],n.prototype.init=function(){e.businessDOW(),e.timedUpdate()},e.fn.cifullCalendar=function(t){var a,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=e(this),l=o.data("calendar");e.extend({},n.DEFAULTS,o.data(),"object"==typeof t&&t);if("string"==typeof t){if(e.inArray(t)<0)throw new Error("Unknown method: "+t);if(!l)return;a=l[t].apply(l,r),"destroy"===t&&o.removeData("calendar")}}),void 0===a?this:a},e.fn.cifullCalendar.defaults=n.DEFAULTS,e.fn.cifullCalendar.locales=n.LOCALES;new google.maps.Geocoder,new google.maps.InfoWindow,new google.maps.LatLngBounds,e.extend(n.DEFAULTS,n.LOCALES.en);var r=new Date,o=(r.getDate(),r.getSeconds(),r.getMinutes(),r.getHours(),r.getDay(),r.getMonth(),r.getFullYear(),[]),l="YYYY-MM-DD HH:mm:ss",i="YYYYMMDD[T]HHmmss",s="dddd, MMMM Do, h:mm:ss a",d="YYYY-MM-DD",u="MMM DD",c="hh:mm a",f="h:mm:ss",m="h",p="mm",g="ss",v="a",h=new RegExp("(.+)"),w=window.location.pathname.replace(h,"./home/"),C=(h=new RegExp("(.+)/index.php/"),window.location.pathname.replace(h,"")),b=new RegExp("index.php/(([a-z]+)|([0-9]+)|([a-z]+)([0-9]+))"),y=(window.location.pathname.replace(b,""),new Array),E=new Array,_=new Array;!function t(){e("#calendar").fullCalendar("refetchEvents");setTimeout(t,6e4)}();var x=1.35,D="",M="",L="",T="",k="",A="",S="",H="",N="",j="",R="",q="",I="",Y="",O="",F="",z="",U="",G="",P="",W="",V="",X="",Z="",Q="",B="",J="00:30:00",K=!1,$=0,ee=!1,te=!0,ae=!0,ne=!1,re="",oe="";return y[0]="home/ujson/"+C,y[1]="",E[0]=w+"rjson",E[1]="",ue(w+"get_timezone",function(e,t){de(t)||(L=t)}),ue(w+"get_timezone2",function(e,a){de(a)||(T=a,k=t.tz(T).format("HH:mm:ss"))}),ue(w+"get_defaultview",function(e,t){de(t)||(D=t)}),ue(w+"get_header_left",function(e,t){de(t)||(A=t)}),ue(w+"get_header_center",function(e,t){de(t)||(S=t)}),ue(w+"get_header_right",function(e,t){de(t)||(H=t)}),ue(w+"get_firstday",function(e,t){de(t)||($=t)}),ue(w+"get_slotduration",function(e,t){de(t)||(J=t)}),ue(w+"get_slotlabeling",function(e,t){de(t)||(K="true"==t)}),ue(w+"get_slotlabelformat",function(e,t){de(t)||(c=t)}),ue(w+"get_aspectratio",function(e,t){de(t)||(x=t!=x?t:x)}),ue(w+"get_hiddendays",function(e,t){de(t)||(N=t.split(","),j=Number(N[0]),R=Number(N[1]),q=Number(N[2]),I=Number(N[3]),Y=Number(N[4]),O=Number(N[5]),F=Number(N[6]))}),ue(w+"get_businessstart",function(e,t){de(t)||(z=t)}),ue(w+"get_businessend",function(e,t){de(t)||(U=t)}),ue(w+"get_businessdays",function(e,t){de(t)||(G=t.split(","),P=Number(G[0]),W=Number(G[1]),V=Number(G[2]),X=Number(G[3]),Z=Number(G[4]),Q=Number(G[5]),B=Number(G[6]))}),ue(w+"get_weeknumbers",function(e,t){ee="true"==t}),ue(w+"get_eventlimit",function(e,t){te="true"==t}),ue(w+"get_alldayslot",function(e,t){ae="true"==t}),ue(w+"get_isrtl",function(e,t){ne="true"==t}),ue(w+"get_googlekey",function(t,a){de(a)||(re=e.trim(a))}),ue(w+"get_schedulerkey",function(t,a){de(a)||(oe=e.trim(a))}),ue(w+"get_lang",function(a,o){M=o,t.updateLocale(M,{parentLocale:M}),e.extend(n.DEFAULTS,n.LOCALES[M]),se(),e("#calendar").fullCalendar({defaultDate:e.fullCalendar.moment(),defaultView:D,locale:M,aspectRatio:x,timezone:L,now:L,weekNumberCalculation:L,scrollTime:k,nowIndicator:!0,header:{left:A,center:S,right:H},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},smallTimeFormat:c,slotLabel:K,isRTL:ne,theme:!1,allDaySlot:ae,fixedWeekCount:!1,firstDay:$,weekends:!0,weekNumbers:ee,weekNumbersWithinDays:!1,weekNumberCalculation:"local",showNonCurrentDates:!0,hiddenDays:[j,R,q,I,Y,O,F],businessHours:{start:z,end:U,dow:[P,W,V,X,Z,Q,B]},editable:!1,eventStartEditable:!1,eventDurationEditable:!1,selectable:!1,selectHelper:!1,eventLimit:te,defaultTimedEventDuration:J,snapDuration:J,startParam:"start",endParam:"end",googleCalendarApiKey:re,schedulerLicenseKey:oe,resourceAreaWidth:"",resourceLabelText:"",resources:E[0],eventSources:[y[0],y[1]],eventRender:function(t,a,n){a.attr("href","javascript:void(0);"),t.title.length>14&&a.find(".fc-title").text(t.title.substr(0,14)+"...").parent().attr("title",t.title),a.eq({event:t.id,title:t.title,resourceId:t.resourceId,daystart:e.fullCalendar.moment(t.start).format(l),dayend:e.fullCalendar.moment(t.end).format(l),backgroundColor:t.backgroundColor,borderColor:t.borderColor,textColor:t.textColor,description:t.description,url:t.url,allDay:t.allDay,auth:t.auth,rendering:t.rendering,overlap:t.overlap,recurdays:t.recurdays,recurend:t.recurend,location:t.location,latitude:t.longitude,longitude:t.longitude,category:t.category,filename:t.filename,filedata:t.filedata})},views:{basic:{slotDuration:J},agenda:{slotDuration:J},week:{slotDuration:J},day:{slotDuration:J}},eventClick:function(t,a,n){var o=t.start?e.fullCalendar.moment(t.start).format(l):e.fullCalendar.moment(r).format(l),u=t.end?e.fullCalendar.moment(t.end).format(l):e.fullCalendar.moment(t.start).format(l),c=e.fullCalendar.moment(o).format(d)<e.fullCalendar.moment(u).format(d)?e.fullCalendar.moment(u).format(s):e.fullCalendar.moment(u).format("h:mm:ss a"),f=e.fullCalendar.moment(o).format(s)+" - "+c,m=t.filename?'<a href="data:application/octet-stream;base64,'+t.filedata+'" download="'+t.filename+'" ><b>'+t.filename+"</b></a>":"",p=t.end?e.fullCalendar.moment(t.end).format(i):e.fullCalendar.moment(t.start).format(i),g=(u-o)/60/1e3,v=(g/60+g%60).toString(),h=parseFloat(t.latitude).toFixed(14),C=parseFloat(t.longitude).toFixed(14);!function(t,a,n){var r=new google.maps.LatLng(t,a);if(de(n))e("#gmapsCanvas").attr("class","mapHidden"),e("#markers_ulat").attr("class","mapHidden"),e("#markers_ulng").attr("class","mapHidden");else{e("#gmapsCanvas").attr("class","map"),e("#markers_ulat").attr("class","map"),e("#markers_ulng").attr("class","map");var o={center:r,zoomControl:!0,zoom:19,mapTypeId:google.maps.MapTypeId.ROADMAP},l=new google.maps.Map(document.getElementById("gmapsCanvas"),o),i=(new google.maps.InfoWindow,new google.maps.Marker({position:r,map:l,draggable:!1}));google.maps.event.addListener(l,"idle",function(){google.maps.event.trigger(l,"resize"),l.setZoom(l.getZoom()-1),l.setZoom(l.getZoom()+1)}),google.maps.event.addListenerOnce(l,"center_changed",function(){window.setTimeout(function(){l.panTo(i.getPosition())},500)})}}(h,C,t.location),e("#viewEventModal #gexport").html('<a href="//www.google.com/calendar/event?action=TEMPLATE&amp;text='+t.title+"&amp;dates="+e.fullCalendar.moment(o).format(i)+"/"+p+"&amp;details="+t.description+"&amp;location="+t.location+'&amp;sprop=website:" title="Google" target="_blank" ><i class="fa fa-google"></i></a>'),e("#viewEventModal #yexport").html("<a href='//calendar.yahoo.com/?v=60&DUR="+v.substr(0,2)+"&TITLE="+t.title+"&ST="+e.fullCalendar.moment(o).format(i)+"&in_loc="+t.location+"&DESC="+t.description+"&URL="+t.url+"' title='Yahoo' target='_blank' ><i class='fa fa-yahoo'></i></a>"),e("#viewEventModal #lexport").html("<a href='//calendar.live.com/calendar/calendar.aspx?rru=addevent&dtstart="+o+"&dtend="+u+"&summary="+t.title+"&description="+t.description+"&location="+t.location+"' title='Microsoft' target='_blank' ><i class='fa fa-windows'></i></a>"),e("#viewEventModal #Iexport").html("<a href='"+w+"export/"+t.id+"' title='Export to ICS' ><i class='fa fa-calendar-o'></i></a>"),e("#viewEventModal #ic_event_title").text(t.title),e("#viewEventModal #ic_event_desc").text(t.description),e("#viewEventModal #ic_event_urllink").text(t.url),e("#viewEventModal #ic_event_location").text(t.location),e("#viewEventModal #markers_ulng").text(C),e("#viewEventModal #markers_ulat").text(h),e("#viewEventModal #ic_event_allday").text(t.allDay),e("#viewEventModal #filename").html(m),e("#viewEventModal #when").text(f),e("#viewEventModal").modal("show")},eventMouseover:function(t,a,n){e(".fc-content").popover({trigger:"hover",html:!0,title:function(){return e(this).parent().find(".fc-title").html()},content:function(){return e(this).parent().find(".fc-description").html()},container:"body",placement:"top"})},loading:function(t){t?(e("#loading").show(),le(t)):e("#loading").hide()}})}),e("#cifcv").text(e.cifullCalendar.version),e("#fcv").text(e.fullCalendar.version),e("#fcsv").text(e.fullCalendar.schedulerVersion),e("#loadEvents").on("click",function(t){t.preventDefault(),e("#calendar").fullCalendar("removeEvents"),e("#calendar").fullCalendar("refetchEvents")}),e("#title").off("keyup drop").on("keyup drop",function(t){var a=0;clearTimeout(a),a=setTimeout(function(){t.preventDefault();var a=e("#title").val();de(a)?(_[0]=w+"json",e("#calendar").fullCalendar("removeEventSource",y[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",_[0]),e("#calendar").fullCalendar("refetchEvents"),y[0]=_[0]):(_[0]=w+"search?title="+a,e("#calendar").fullCalendar("removeEventSource",y[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",_[0]),e("#calendar").fullCalendar("refetchEvents"),y[0]=_[0])},!0)}),e("#submitsearch").on("click",function(t){t.preventDefault();var a=e("#title").val();de(a)?(_[0]=w+"json",e("#calendar").fullCalendar("removeEventSource",y[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",_[0]),e("#calendar").fullCalendar("refetchEvents"),y[0]=_[0]):(_[0]=w+"search?title="+a,e("#calendar").fullCalendar("removeEventSource",y[0]),e("#calendar").fullCalendar("refetchEvents"),e("#calendar").fullCalendar("addEventSource",_[0]),e("#calendar").fullCalendar("refetchEvents"),y[0]=_[0])}),n}function le(t){t.lengthComputable&&e("progress").attr({value:t.loaded,max:t.total})}function ie(){var e;for(t.updateLocale(M,{parentLocale:M}),t.tz(T).format(u),e=0;e<o.length;e++)o[e].render()}function se(){!function(){var a=t.tz(T),n=6*a.format(g),r=6*a.format(p)+n/60,o=a.format(m)%12/12*360+90+r/12;ie();var l=a.format(u),i=a.format(v),s="<i class='fa fa-clock-o'></i> "+a.format(f),d="<i class='fa fa-globe'></i> "+T;e("#hour").css("transform","rotate("+o+"deg)"),e("#minute").css("transform","rotate("+r+"deg)"),e("#second").css("transform","rotate("+n+"deg)"),e("#ampm").text(i),e("#date").text(l),e("#timezone").html(d),e("#digiclock").html(s)}(),ie(),setTimeout(se,1e3)}function de(e){var t=typeof e;return"undefined"===t||("object"===t?null===e||0===Object.keys(e).length:[!1,0,"","0"].indexOf(e)>=0)}function le(t){t.lengthComputable&&e("progress").attr({value:t.loaded,max:t.total})}function ue(t,a){var n;if(void 0===a)try{n=new XMLHttpRequest}catch(e){throw new Error("argument missing")}function r(){4===n.readyState?(e("#loading").show(),le(4===n.readyState),200!==n.status&&304!==n.status&&1223!==n.status||e("#calendar").fullCalendar("refetchEvents")):e("#loading").hide()}function o(){var e=void 0;if(n.response?e=n.response:"text"!==n.responseType&&n.responseType||(e=n.responseText||n.responseXML),m)try{e=JSON.parse(e)}catch(e){}return e}(window.XMLHttpRequest||window.document||window.ActiveXObject)&&(n=new XMLHttpRequest);var l,i={body:void 0,headers:{},statusCode:0,method:u,url:t,rawRequest:n};function s(e){clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown Error"))),e.statusCode=0,a(e,i)}var d,u=n.method="GET",c=o(),f=n.headers,m=!0;return m&&"GET"!==u&&"HEAD"!==u&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json")||(f["Access-Control-Allow-Methods"]="GET")||(f["Access-Control-Allow-Origin"]="*"),c=JSON.stringify()),n.onreadystatechange=function(){r()},n.onload=function(){if(!l){var e;clearTimeout(d),e=void 0===n.status?200:1223===n.status?204:n.status;var r=i,s=null;0!==e?(r={body:o(),statusCode:e,method:u,headers:{},url:t,rawRequest:n},n.getAllResponseHeaders&&(r.headers=function(e){var t=n.headers;if(!e)return t;for(var a=e.split("\r\n"),r=0;r<a.length;r++){var o=a[r],l=o.indexOf(": ");if(l>0){var i=o.substring(0,l);if(o.substring(l,2),!n.setRequestHeader)throw new Error("Headers cannot be set on object");for(i in t)t.hasOwnProperty(i)&&n.setRequestHeader(i,t[i])}}return t}(n.getAllResponseHeaders()))):s=new Error("Internal Error"),a(s,r.body)}},n.onerror=s,n.onprogress=r,n.ontimeout=s,n.open(u,t,!0),n.send(c),n}a.warn("Incompatible with v"+a.version+" of the core.\nPlease see http://sirdre.com for more information.")});