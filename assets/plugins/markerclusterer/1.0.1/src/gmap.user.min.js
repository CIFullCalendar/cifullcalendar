/*!
 * CIFullCalendar v2.6.1
 * Docs & License: http://sirdre.com/apps/cifullcalendar/docs/
 * (c) 2015 sirdre
 */
!function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","MarkerClusterer"],e);else if("object"==typeof exports)e(require("jquery"),require("google.maps.Geocoder"));else{if("undefined"==typeof google.maps.Geocoder)throw"CIFullCalendar requires Gmaps to be loaded first";if("undefined"==typeof MarkerClusterer)throw"CIFullCalendar requires MarkerClusterer to be loaded first";if("undefined"==typeof jQuery)throw"CIFullCalendar requires jQuery to be loaded first";e(jQuery,MarkerClusterer)}}(function(e,r){function t(e){var t={mapTypeId:google.maps.MapTypeId.ROADMAP};s=new google.maps.Map(document.getElementById("gmapsCanvas2"),t);var n="gmaps/get_marker?category="+e,p=[],u=[],c="";a(n,function(e,t){if(!o(t)){for(var n=0;n<t.length;++n){c=t[n];var a=new google.maps.LatLng(parseFloat(c.markers_lat),parseFloat(c.markers_lng));p=new google.maps.Marker({map:s,icon:d+""+c.markers_logo,position:a,title:c.markers_name}),l.extend(p.position),p.addListener("click",function(e,r){return function(){i.setContent('<h4><a href="'+t[r].markers_url+'" target="_blank">'+t[r].markers_name+"</a></h4><p>"+t[r].markers_desc+"</p><p><b>"+t[r].markers_address+"</b><br/><i>"+t[r].markers_lat+" , "+t[r].markers_lng+" </i></p><p><b>"+t[r].username+"</b></p>"),i.open(s,this)}}(p,n)),u.push(p)}new r(s,u)}s.fitBounds(l),s.panToBounds(l)});var f={name:"gStyle"},g=[{featureType:"road",elementType:"all",stylers:[{visibility:"on"}]}],m=new google.maps.StyledMapType(g,f);s.mapTypes.set("gStyle",m),s.setMapTypeId("gStyle")}function o(e){var r=typeof e;return"undefined"===r||("object"===r?null===e||0===Object.keys(e).length:[!1,0,"","0"].indexOf(e)>=0)}function n(r){r.lengthComputable&&e("progress").attr({value:r.loaded,max:r.total})}function a(r,t){function o(){a()}function a(){4===p.readyState?(e("#loading").show(),n(4===p.readyState),(200===p.status||304===p.status||1223===p.status)&&t(p)):e("#loading").hide()}function s(){var e=void 0;if(p.response?e=p.response:"text"!==p.responseType&&p.responseType||(e=p.responseText||p.responseXML),u)try{e=JSON.parse(e)}catch(r){}return e}function i(e){clearTimeout(g),e instanceof Error||(e=new Error(""+(e||"Unknown Error"))),e.statusCode=0,t(e,m)}function l(e){var r=p.headers;if(!e)return r;for(var t=e.split("\r\n"),o=0;o<t.length;o++){var n=t[o],a=n.indexOf(": ");if(a>0){var s=n.substring(0,a);n.substring(a,2);if(!p.setRequestHeader)throw new Error("Headers cannot be set on object");for(s in r)r.hasOwnProperty(s)&&p.setRequestHeader(s,r[s])}}return r}function d(){if(!f){var e;clearTimeout(g),e=void 0===p.status?200:1223===p.status?204:p.status;var o=m,n=null;0!==e?(o={body:s(),statusCode:e,method:y,headers:{},url:r,rawRequest:p},p.getAllResponseHeaders&&(o.headers=l(p.getAllResponseHeaders()))):n=new Error("Internal Error"),t(n,o.body)}}var p,u=!0;if("undefined"==typeof t)try{p=new XMLHttpRequest}catch(c){throw new Error("argument missing")}(window.XMLHttpRequest||window.document||window.ActiveXObject)&&(p=new XMLHttpRequest);var f,g,m={body:void 0,headers:{},statusCode:0,method:y,url:r,rawRequest:p},y=p.method="GET",w=s(),h=p.headers,v=0;return u&&"GET"!==y&&"HEAD"!==y&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json")||(h["Access-Control-Allow-Methods"]="GET")||(h["Access-Control-Allow-Origin"]="*"),w=JSON.stringify()),p.onreadystatechange=o,p.onload=d,p.onerror=i,p.onprogress=a,p.ontimeout=i,p.open(y,r,!0),v>0&&(g=setTimeout(function(){f=!0,p.abort("timeout");var e=new Error("timeout");e.code="ETIMEDOUT",i(e)},v)),p.send(w),p}var s,i=(new google.maps.Geocoder,new google.maps.InfoWindow),l=new google.maps.LatLngBounds,d=window.location.protocol+"//"+window.location.host+"/"+window.location.pathname.replace("index.php/profile/gmaps","")+"assets/img/pin/";window.location.protocol+"//"+window.location.host+window.location.pathname.replace("profile/gmaps","")+"profile";t(),e("#marker_category").change(function(){var r=e("#marker_category option:selected").val();t(r)}),a("home/get_category",function(r,t){if(!o(t))for(var n=0;n<t.length;n++)e("#marker_category").append("<option value="+t[n].category_id+">"+t[n].category_name+" ("+t[n].count+")</option>")})});